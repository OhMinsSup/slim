function isCrushed(){}var error=function(e){throw new Error(e)},warn=window.console.warn,throwIf=function(e,t){e&&error(t)},warnIf=function(e,t){e&&warn(t)},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},toConsumableArray=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},eventMap={},EventCenter={on:function(e,t){eventMap[e]||(eventMap[e]=[]),eventMap[e].push(t)},off:function(e,t){var n=eventMap[e];if(Array.isArray(n)){var r=n.indexOf(t);-1!==r&&n.splice(r,1)}},emit:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o=eventMap[e];warnIf(!o,"there are no handler for event ["+e+"]"),o&&o.forEach(function(e){e.apply(void 0,toConsumableArray(n))})}},isPlainObject=function(e){return"[object Object]"===Object.prototype.toString.call(e)},isPlainString=function(e){return"string"==typeof e},fnT="Function",fnO="Object",passReducer=function(e){return Object.keys(e).forEach(function(t){var n=e[t];throwIf("function"!=typeof n,"Reducer for key ["+t+"] must be type of [fnT] but got ["+(void 0===n?"undefined":_typeof(n))+"]")}),e},passGetter=function(e){return Object.keys(e).forEach(function(t){var n=e[t];throwIf("function"!=typeof n,msgHelper.shouldBe("Getter."+t,fnT,void 0===n?"undefined":_typeof(n)))}),e},passPlugin=function(e){if(!e)return[];var t=Array.isArray(e)?e:[e];return t.forEach(function(e){validatePlugin(e)}),t},validatePlugin=function(e){throwIf(!isPlainObject(e),msgHelper.shouldBe("Plugin",fnO,void 0===e?"undefined":_typeof(e)));var t=e.before,n=e.after;t&&throwIf("function"!=typeof t,msgHelper.shouldBe("Plugin.before",fnT,void 0===t?"undefined":_typeof(t))),n&&throwIf("function"!=typeof n,msgHelper.shouldBe("Plugin.after",fnT,void 0===n?"undefined":_typeof(n)))},walkPlugins=function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];t&&t.forEach(function(t){walkPlugin.apply(void 0,[e,t].concat(r))})},walkPlugin=function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];t[e]&&t[e].apply(t,r)},msgHelper={typeError:function(e){return"type of state expect to [Object] but got ["+e+"]"},shouldBe:function(e,t,n){return e+" should be type of ["+t+"] but got ["+n+"]"},cantCall:function(e){return"You may not call "+e+" while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store."},cantAssign:function(){return"You may not be able to assign values ​​directly to state. Please return a new state for reducing or edit with state in reducer."}},cloneObj=function(e){return JSON.parse(JSON.stringify(e))},parse2Json=function(e){return isPlainObject(e)?e:JSON.parse(e)},injectPlugins=[],isDispatching=null,isStrict=!1,store=void 0,createStore=function(e){var t=e.reducers,n=void 0===t?{}:t,r=e.state,o=void 0===r?{}:r,i=e.plugin,a=e.getters,s=void 0===a?{}:a,_=e.mode,u=void 0===_?"strict":_;if(!isPlainObject(o))throw new TypeError(msgHelper.typeError(void 0===o?"undefined":_typeof(o)));isStrict="strict"===u;var f=EventCenter.on,c=EventCenter.off,l=EventCenter.emit,p=observeObject(o),d=passReducer(_extends({},n,{__SLIM_DEVTOOL_SET__:function(e,t){return t}})),y=[].concat(injectPlugins,toConsumableArray(passPlugin(i)));s=passGetter(s);var O=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throwIf(!isPlainString(e),msgHelper.shouldBe("Actions","string",void 0===e?"undefined":_typeof(e))),throwIf(isDispatching,"Reducers may not dispatch actions.");try{if(isDispatching=e,warnIf(!d[e],"You may not has not registered ["+e+"] in store"),walkPlugins("before",y,p,e),d[e]){var o=d[e].apply(d,[p].concat(n));o&&o!==p&&(p=observeObject(o),store.state=p)}walkPlugins("after",y,p,e)}finally{isDispatching=null}return store};return store={on:f,off:c,emit:l,dispatch:O,getState:function(e){return throwIf(isDispatching,msgHelper.cantCall("store.getState()")),warnIf(e&&!s.hasOwnProperty(e),"Getter of key ["+e+"] is not exist. Please register it with when createStore."),e?s[e]?s[e](p):void 0:p},state:p},walkPlugins("init",y,store),store},observeObject=function(e){var t=function(e){return isPlainObject(e)?n(e):Array.isArray(e)?n(e,!0):e},n=function(e,n){var r={set:function(e,n,r){return throwIf(!isDispatching,msgHelper.cantAssign()),Reflect.set(e,n,t(cloneObj(r)))},get:function(e,t){return Reflect.get(e,t)}},o=_extends({},r,{set:function(e,n,r){if("__proto__"===n)return Reflect.set(e,n,r);if(isDispatching)return Reflect.set(e,n,t(cloneObj(r)));throw new Error(msgHelper.cantAssign())}});for(var i in e)e[i]=t(e[i]);return new Proxy(e,n?o:r)};return isStrict?n(e):e},use=function(e){validatePlugin(e),injectPlugins.push(e)},__VERSION__=void 0;try{__VERSION__=require("./package.json").version}catch(e){__VERSION__=require("../../package.json").version}var __DEV__="production"!==process.env.NODE_ENV,__SLIM_DEVTOOL_INIT__="__SLIM_DEVTOOL_INIT__",__SLIM_DEVTOOL_INIT_ANSWER__="__SLIM_DEVTOOL_INIT_ANSWER__",__SLIM_DEVTOOL_ANSWER__="__SLIM_DEVTOOL_ANSWER__",__SLIM_DEVTOOL_SET__="__SLIM_DEVTOOL_SET__",__SLIM_DEVTOOL__="__SLIM_DEVTOOL__";warnIf(__DEV__&&"string"==typeof isCrushed.name&&"isCrushed"!==isCrushed.name,'You are currently using minified code outside of NODE_ENV === "production". This means that you are running a slower development build of Slim. ');var _createStore=function(){return __DEV__&&use({init:function(e){window.addEventListener("message",function(t){var n=parse2Json(t.data),r=n.type,o=n.state;r===__SLIM_DEVTOOL_ANSWER__?e.emit(__SLIM_DEVTOOL_ANSWER__,parse2Json(o)):r===__SLIM_DEVTOOL_INIT__&&window.postMessage({version:__VERSION__,type:__SLIM_DEVTOOL_INIT_ANSWER__,state:JSON.stringify(e.getState())},"*")})},after:function(e,t){-1===[__SLIM_DEVTOOL_INIT__,__SLIM_DEVTOOL_INIT_ANSWER__,__SLIM_DEVTOOL_ANSWER__,__SLIM_DEVTOOL_SET__,__SLIM_DEVTOOL__].indexOf(t)&&window.postMessage({version:__VERSION__,type:__SLIM_DEVTOOL__,state:JSON.stringify(e),actionType:t},"*")}}),createStore},Slim={__VERSION__:__VERSION__,createStore:_createStore(),use:use};export default Slim;
